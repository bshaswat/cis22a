I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8c3RyaW5nPgp1c2luZyBuYW1lc3BhY2Ugc3Rk
OwoKc3RyaW5nIFNob3J0ZW5TcGFjZShjb25zdCBzdHJpbmcgc2FtcGxlVGV4dCk7CmludCBHZXRO
dW1PZk5vbldTQ2hhcmFjdGVycyhjb25zdCBzdHJpbmcgc2FtcGxlVGV4dCk7CmludCBHZXROdW1P
ZldvcmRzKGNvbnN0IHN0cmluZyBzYW1wbGVUZXh0KTsKaW50IEZpbmRUZXh0KGNvbnN0IHN0cmlu
ZyB0ZXh0LCBjb25zdCBzdHJpbmcgc2FtcGxlVGV4dCk7CnN0cmluZyBSZXBsYWNlRXhjbGFtYXRp
b24oY29uc3Qgc3RyaW5nIHNhbXBsZVRleHQpOwp2b2lkIFByaW50TWVudShzdHJpbmcgc2FtcGxl
VGV4dCk7CgppbnQgbWFpbigpIHsKICBzdHJpbmcgc2FtcGxlVGV4dDsKICBjb3V0IDw8ICJFbnRl
ciBhIHNhbXBsZSB0ZXh0OlxuXG4iOwogIGdldGxpbmUoY2luLHNhbXBsZVRleHQpOwogIGNvdXQg
PDwgIllvdSBlbnRlcmVkOiAiIDw8IHNhbXBsZVRleHQgPDwgZW5kbCA8PCBlbmRsOwogIFByaW50
TWVudShzYW1wbGVUZXh0KTsKICByZXR1cm4gMDsKfQoKdm9pZCBQcmludE1lbnUoc3RyaW5nIHNh
bXBsZVRleHQpIHsKICBjaGFyIHVzZXJPcHRpb247CiAgc3RyaW5nIHVzZXJUZXh0OwogIGludCBm
b3VuZDsKCiAgZG8geyAKICAgIGNvdXQgPDwgIk1FTlVcbiIKICAgICAgICAgPDwgImMgLSBOdW1i
ZXIgb2Ygbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyc1xuIiAKICAgICAgICAgPDwgIncgLSBOdW1i
ZXIgb2Ygd29yZHNcbiIKICAgICAgICAgPDwgImYgLSBGaW5kIHRleHRcbiIKICAgICAgICAgPDwg
InIgLSBSZXBsYWNlIGFsbCAhJ3NcbiIKICAgICAgICAgPDwgInMgLSBTaG9ydGVuIHNwYWNlc1xu
IgogICAgICAgICA8PCAicSAtIFF1aXQiIDw8IGVuZGwgPDwgZW5kbDsKICAgIGNvdXQgPDwgIkNo
b29zZSBhbiBvcHRpb246XG4iOwogICAgY2luID4+IHVzZXJPcHRpb247CiAgICAKICAgIHN3aXRj
aCAodXNlck9wdGlvbikgewogICAgICBjYXNlICdjJzogCiAgICAgICAgY291dCA8PCAiTnVtYmVy
IG9mIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnM6ICIgCiAgICAgICAgICAgICA8PCBHZXROdW1P
Zk5vbldTQ2hhcmFjdGVycyhzYW1wbGVUZXh0KSA8PCBlbmRsIDw8IGVuZGw7OwogICAgICBicmVh
azsKICAgICAgY2FzZSAndyc6CiAgICAgICAgY291dCA8PCAiTnVtYmVyIG9mIHdvcmRzOiAiCiAg
ICAgICAgICAgICA8PCBHZXROdW1PZldvcmRzKHNhbXBsZVRleHQpIDw8IGVuZGwgPDwgZW5kbDsK
ICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZic6CiAgICAgICAgY291dCA8PCAiRW50ZXIgYSB3
b3JkIG9yIHBocmFzZSB0byBiZSBmb3VuZDpcbiI7CiAgICAgICAgY2luLmlnbm9yZSgpOwogICAg
ICAgIGdldGxpbmUoY2luLHVzZXJUZXh0KTsKICAgICAgICBmb3VuZCA9IEZpbmRUZXh0KHVzZXJU
ZXh0LCBzYW1wbGVUZXh0KTsKICAgICAgICBjb3V0IDw8ICJcIiIgPDwgdXNlclRleHQgPDwgIlwi
IGluc3RhbmNlczogIgogICAgICAgICAgICAgPDwgZm91bmQgPDwgZW5kbCA8PCBlbmRsOwogICAg
ICAgIGJyZWFrOwogICAgICBjYXNlICdyJzoKICAgICAgICBjb3V0IDw8ICJFZGl0ZWQgdGV4dDog
IiA8PCBSZXBsYWNlRXhjbGFtYXRpb24oc2FtcGxlVGV4dCkKICAgICAgICAgICAgIDw8IGVuZGwg
PDwgZW5kbDsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAncyc6CiAgICAgICAgY291dCA8PCAi
RWRpdGVkIHRleHQ6ICIgPDwgU2hvcnRlblNwYWNlKHNhbXBsZVRleHQpCiAgICAgICAgICAgICA8
PCBlbmRsIDw8IGVuZGw7CiAgICAgICAgYnJlYWs7CiAgICB9IAogIH0gd2hpbGUgKHVzZXJPcHRp
b24gIT0ncScpOwp9CgpzdHJpbmcgU2hvcnRlblNwYWNlKGNvbnN0IHN0cmluZyBzYW1wbGVUZXh0
KSB7CiAgc3RyaW5nIG5ld1RleHQgPSAiIjsKICBib29sIHNwYWNlRm91bmQgPSBmYWxzZTsKICBm
b3IgKHVuc2lnbmVkIGludCBpID0gMDsgaSA8IHNhbXBsZVRleHQuc2l6ZSgpOyBpKyspIHsKICAg
IGlmIChzYW1wbGVUZXh0W2ldICE9ICcgJykgewogICAgICBuZXdUZXh0ID0gbmV3VGV4dCArIHNh
bXBsZVRleHRbaV07CiAgICAgIHNwYWNlRm91bmQgPSBmYWxzZTsKICAgIH0gZWxzZSB7CiAgICAg
IGlmICghc3BhY2VGb3VuZCkgewogICAgICAgIG5ld1RleHQgPSBuZXdUZXh0ICsgIiAiOwogICAg
ICB9CiAgICAgIHNwYWNlRm91bmQgPSB0cnVlOwogICAgfQogIH0KICByZXR1cm4gbmV3VGV4dDsK
fQoKaW50IEdldE51bU9mTm9uV1NDaGFyYWN0ZXJzKGNvbnN0IHN0cmluZyBzYW1wbGVUZXh0KSB7
CiAgaW50IGNvdW50ZXIgPSAwOwogIGZvciAodW5zaWduZWQgaW50IGkgPSAwOyBpIDwgc2FtcGxl
VGV4dC5zaXplKCk7IGkrKykgewogICAgaWYgKHNhbXBsZVRleHRbaV0gIT0gJyAnKQogICAgICBj
b3VudGVyKys7CiAgfQogIHJldHVybiBjb3VudGVyOwp9CgppbnQgR2V0TnVtT2ZXb3Jkcyhjb25z
dCBzdHJpbmcgc2FtcGxlVGV4dCkgewogIGludCBzcGFjZXMgPSAwOwogIHN0cmluZyBzaW5nbGVT
cGFjZWQgPSBTaG9ydGVuU3BhY2Uoc2FtcGxlVGV4dCk7CgogIGZvciAodW5zaWduZWQgaW50IGkg
PSAwOyBpIDwgc2luZ2xlU3BhY2VkLnNpemUoKTsgaSsrKSB7CiAgICBpZiAoc2luZ2xlU3BhY2Vk
W2ldID09ICcgJykKICAgICAgc3BhY2VzKys7CiAgfQogIHJldHVybiBzcGFjZXMgKyAxOwp9Cgpp
bnQgRmluZFRleHQoY29uc3Qgc3RyaW5nIHRleHQsIGNvbnN0IHN0cmluZyBzYW1wbGVUZXh0KSB7
CiAgaW50IGNvdW50ID0gMDsKICBpbnQgcG9zID0gLTE7CiAgZG8gewogICAgcG9zID0gc2FtcGxl
VGV4dC5maW5kKHRleHQsIHBvcysxKTsKICAgIGlmIChwb3MgIT0gLTEpIHsKICAgICAgKytjb3Vu
dDsKICAgIH0KICB9IHdoaWxlIChwb3MgIT0gLTEpOwogIHJldHVybiBjb3VudDsKfQoKc3RyaW5n
IFJlcGxhY2VFeGNsYW1hdGlvbihjb25zdCBzdHJpbmcgc2FtcGxlVGV4dCkgewogIHN0cmluZyBu
ZXdUZXh0ID0gc2FtcGxlVGV4dDsKICBpbnQgcG9zID0gLTE7CiAgZG8gewogICAgcG9zID0gbmV3
VGV4dC5maW5kKCchJywgcG9zKzEpOwogICAgaWYgKHBvcyAhPSAtMSkgewogICAgICBuZXdUZXh0
W3Bvc10gPSAnLic7CiAgICB9CiAgfSB3aGlsZSAocG9zICE9IC0xKTsKCiAgcmV0dXJuIG5ld1Rl
eHQ7Cn0=