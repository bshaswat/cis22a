I2luY2x1ZGUgPGlvc3RyZWFtPg0KI2luY2x1ZGUgPHN0cmluZz4NCiNpbmNsdWRlIDxmc3RyZWFt
Pg0KDQp1c2luZyBuYW1lc3BhY2Ugc3RkOw0KDQppbnQgRGF0ZVBhcnNlcihzdHJpbmcgbW9udGgp
Ow0KDQppbnQgbWFpbigpIHsNCiAgICBzdHJpbmcgZGF0ZSA9ICIiLA0KICAgICAgICAgICAgd29y
ZDsNCiAgICBzaXplX3QgZmlyc3RQb3MsIHNlY29uZFBvczsNCiAgICBpZnN0cmVhbSBpbkZTOw0K
ICAgIGNvbnN0IHN0cmluZyBGSUxFID0gImRhdGVzLnR4dCI7DQoNCiAgICBpbkZTLm9wZW4oRklM
RSk7DQogICAgaWYgKCFpbkZTLmlzX29wZW4oKSkgew0KICAgICAgICBjb3V0IDw8ICJDYW5ub3Qg
b3BlbiAiIDw8IEZJTEUgPDwgZW5kbDsNCiAgICAgICAgcmV0dXJuIDE7DQogICAgfQ0KDQogICAg
d2hpbGUgKCFpbkZTLmVvZigpIHx8IGRhdGUgIT0gIi0xIikgew0KICAgICAgICBnZXRsaW5lKGlu
RlMsIGRhdGUpOw0KICAgICAgICBpZiAoIWluRlMuZmFpbCgpKSB7DQogICAgICAgICAgICAvLyBm
aW5kIGZpcnN0IHNwYWNlIHJlc3VsdCBpbiB0aGUgbW9udGgNCiAgICAgICAgICAgIGZpcnN0UG9z
ID0gZGF0ZS5maW5kKCcgJyk7DQogICAgICAgICAgICBzZWNvbmRQb3MgPSBkYXRlLmZpbmQoJywn
KTsgLy8gaW52YWxpZCBpZiBoYXMgbm8gY29tbWENCiAgICAgICAgICAgIGlmIChmaXJzdFBvcyA9
PSBzdHJpbmc6Om5wb3MgIHx8IHNlY29uZFBvcyA9PSBzdHJpbmc6Om5wb3MpIHsNCiAgICAgICAg
ICAgICAgICBjb250aW51ZTsgLy8gc2tpcA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8g
Z290IHRoZSBtb250aCwgaXMgaXQgdmFsaWQ/DQogICAgICAgICAgICB3b3JkID0gZGF0ZS5zdWJz
dHIoMCwgZmlyc3RQb3MpOw0KICAgICAgICAgICAgaW50IG1vbnRoSW50ID0gRGF0ZVBhcnNlcih3
b3JkKTsNCiAgICAgICAgICAgIC8vIGludmFsaWQNCiAgICAgICAgICAgIGlmIChtb250aEludCA9
PSAwKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXANCiAgICAgICAgICAgIH0N
CiAgICAgICAgICAgIC8vIGZpbmQgbmV4dCBzcGFjZQ0KICAgICAgICAgICAgc2Vjb25kUG9zID0g
ZGF0ZS5maW5kKCcgJywgZmlyc3RQb3MrMSk7DQogICAgICAgICAgICBpZiAoc2Vjb25kUG9zID09
IHN0cmluZzo6bnBvcykgew0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBtaXNzaW5nIGRh
eSAmIHllYXINCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHdvcmQgPSBkYXRlLnN1YnN0cihm
aXJzdFBvcysxLCBzZWNvbmRQb3MpOw0KICAgICAgICAgICAgaW50IGRheUludCA9IHN0b2kod29y
ZCk7DQogICAgICAgICAgICBpZiAoZGF5SW50IDwgMSB8fCBkYXlJbnQgPiAzMSkgew0KICAgICAg
ICAgICAgICAgIGNvbnRpbnVlOyAvLyBub3QgY29ycmVjdCBkYXkNCiAgICAgICAgICAgIH0NCg0K
ICAgICAgICAgICAgd29yZCA9IGRhdGUuc3Vic3RyKHNlY29uZFBvcysxLCBkYXRlLmxlbmd0aCgp
IC0gc2Vjb25kUG9zKTsNCiAgICAgICAgICAgIGludCB5ZWFySW50ID0gc3RvaSh3b3JkKTsNCiAg
ICAgICAgICAgIGlmICh5ZWFySW50IDw9IDApIHsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsg
Ly8gaW52YWxpZCB5ZWFyDQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBnb3QgYWxsIGlu
Zm8sIHByaW50IG91dA0KICAgICAgICAgICAgY291dCA8PCBtb250aEludCA8PCAiLyIgPDwgZGF5
SW50IDw8ICIvIiA8PCB5ZWFySW50IDw8IGVuZGw7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBp
bkZTLmNsb3NlKCk7DQoNCiAgICByZXR1cm4gMDsNCn0NCg0KaW50IERhdGVQYXJzZXIoc3RyaW5n
IG1vbnRoKSB7DQogICAgaW50IG1vbnRoSW50ID0gMDsNCg0KICAgIGlmIChtb250aCA9PSAiSmFu
dWFyeSIpDQogICAgICAgIG1vbnRoSW50ID0gMTsNCiAgICBlbHNlIGlmIChtb250aCA9PSAiRmVi
cnVhcnkiKQ0KICAgICAgICBtb250aEludCA9IDI7DQogICAgZWxzZSBpZiAobW9udGggPT0gIk1h
cmNoIikNCiAgICAgICAgbW9udGhJbnQgPSAzOw0KICAgIGVsc2UgaWYgKG1vbnRoID09ICJBcHJp
bCIpDQogICAgICAgIG1vbnRoSW50ID0gNDsNCiAgICBlbHNlIGlmIChtb250aCA9PSAiTWF5IikN
CiAgICAgICAgbW9udGhJbnQgPSA1Ow0KICAgIGVsc2UgaWYgKG1vbnRoID09ICJKdW5lIikNCiAg
ICAgICAgbW9udGhJbnQgPSA2Ow0KICAgIGVsc2UgaWYgKG1vbnRoID09ICJKdWx5IikNCiAgICAg
ICAgbW9udGhJbnQgPSA3Ow0KICAgIGVsc2UgaWYgKG1vbnRoID09ICJBdWd1c3QiKQ0KICAgICAg
ICBtb250aEludCA9IDg7DQogICAgZWxzZSBpZiAobW9udGggPT0gIlNlcHRlbWJlciIpDQogICAg
ICAgIG1vbnRoSW50ID0gOTsNCiAgICBlbHNlIGlmIChtb250aCA9PSAiT2N0b2JlciIpDQogICAg
ICAgIG1vbnRoSW50ID0gMTA7DQogICAgZWxzZSBpZiAobW9udGggPT0gIk5vdmVtYmVyIikNCiAg
ICAgICAgbW9udGhJbnQgPSAxMTsNCiAgICBlbHNlIGlmIChtb250aCA9PSAiRGVjZW1iZXIiKQ0K
ICAgICAgICBtb250aEludCA9IDEyOw0KICAgIHJldHVybiBtb250aEludDsNCn0=