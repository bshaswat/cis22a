I2luY2x1ZGUgPGlvc3RyZWFtPg0KI2luY2x1ZGUgPHN0cmluZz4NCiNpbmNsdWRlIDxmc3RyZWFt
Pg0KI2luY2x1ZGUgPGlvbWFuaXA+DQp1c2luZyBuYW1lc3BhY2Ugc3RkOw0KDQpib29sIGZpbGVf
ZXhpc3RzKGNvbnN0IHN0cmluZyYgbmFtZSk7DQpzdHJpbmcgZ2V0X25hbWUoY29uc3Qgc3RyaW5n
JiBsaW5lKTsNCmludCBnZXRfbnVtYmVyKGNvbnN0IHN0cmluZyYgbGluZSk7DQppbnQgQ29sbGVj
dElucHV0RGF0YShjb25zdCBzdHJpbmcmIGZpbGVuYW1lKTsNCnZvaWQgT3V0cHV0VGFibGUoY29u
c3Qgc3RyaW5nJiBmaWxlbmFtZSk7DQp2b2lkIE91dHB1dEdyYXBoKGNvbnN0IHN0cmluZyYgZmls
ZW5hbWUpOw0KDQppbnQgbWFpbigpIHsNCiAgICBjb25zdCBzdHJpbmcgRklMRU5BTUUgPSAibm92
ZWxzLnR4dCI7DQoNCiAgICBpZiAoIWZpbGVfZXhpc3RzKEZJTEVOQU1FKSkgew0KICAgICAgICAv
LyBhc2sgZm9yIGlucHV0IGFuZCB3cml0ZSB0byBmaWxlDQogICAgICAgIGludCBjb3VudCA9IENv
bGxlY3RJbnB1dERhdGEoRklMRU5BTUUpOw0KICAgICAgICBpZiAoY291bnQgPD0gMCkgew0KICAg
ICAgICAgICAgY291dCA8PCAiTm8gZGF0YSBmb3VuZFxuIjsNCiAgICAgICAgICAgIHJldHVybiAx
Ow0KICAgICAgICB9DQogICAgfQ0KDQogICAgT3V0cHV0VGFibGUoRklMRU5BTUUpOw0KICAgIE91
dHB1dEdyYXBoKEZJTEVOQU1FKTsNCg0KICAgIHJldHVybiAwOw0KfQ0KDQp2b2lkIE91dHB1dEdy
YXBoKGNvbnN0IHN0cmluZyYgZmlsZW5hbWUpIHsNCiAgICBzdHJpbmcgbGluZTsNCiAgICBzaXpl
X3QgY291bnQgPSAwOw0KICAgIGlmc3RyZWFtIGluRlMoZmlsZW5hbWUpOw0KDQogICAgaWYgKGlu
RlMuYmFkKCkpIHsNCiAgICAgICAgY291dCA8PCAiQ2Fubm90IHJlYWQgIiA8PCBmaWxlbmFtZSA8
PCBlbmRsOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgd2hpbGUgKCFpbkZTLmVvZigp
KSB7DQogICAgICAgIGdldGxpbmUoaW5GUywgbGluZSk7DQoNCiAgICAgICAgLy8gc2tpcCBpZiBm
YWlsIG9yIGZpcnN0IDMgbGluZXMNCiAgICAgICAgaWYgKGluRlMuZmFpbCgpIHx8IGNvdW50Kysg
PCAzKSB7DQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIHBy
aW50IGF1dGhvciByaWdodCBqdXN0aWZpZWQgc2V0dygyMCkNCiAgICAgICAgY291dCA8PCBzZXRm
aWxsKCcgJykgPDwgc2V0dygyMCkgPDwgcmlnaHQgPDwgZ2V0X25hbWUobGluZSkgPDwgIiAiDQog
ICAgICAgICAgICAgPDwgc2V0ZmlsbCgnKicpIDw8IHNldHcoZ2V0X251bWJlcihsaW5lKSkgPDwg
IiIgPDwgZW5kbDsNCiAgICB9DQoNCiAgICBpbkZTLmNsb3NlKCk7DQp9DQoNCnZvaWQgT3V0cHV0
VGFibGUoY29uc3Qgc3RyaW5nJiBmaWxlbmFtZSkgew0KICAgIHN0cmluZyBsaW5lOw0KICAgIHNp
emVfdCBjb3VudCA9IDA7DQogICAgaWZzdHJlYW0gaW5GUyhmaWxlbmFtZSk7DQoNCiAgICBpZiAo
aW5GUy5iYWQoKSkgew0KICAgICAgICBjb3V0IDw8ICJDYW5ub3QgcmVhZCAiIDw8IGZpbGVuYW1l
IDw8IGVuZGw7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICB3aGlsZSAoIWluRlMuZW9m
KCkpIHsNCiAgICAgICAgZ2V0bGluZShpbkZTLCBsaW5lKTsNCg0KICAgICAgICBpZiAoaW5GUy5m
YWlsKCkpIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQogICAgICAgIGlmIChj
b3VudCA9PSAwKSB7DQogICAgICAgICAgICAvLyB0aXRsZSBzZXR3KDMzKSByaWdodCBqdXN0aWZp
ZWQNCiAgICAgICAgICAgIGNvdXQgPDwgc2V0dygzMykgPDwgcmlnaHQgPDwgbGluZSA8PCBlbmRs
Ow0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKGNvdW50ID09IDEpIHsNCiAgICAgICAgICAg
IC8vIGxlZnQgaGVhZGVyIHNldHcoMjApIGxlZnQganVzdGlmaWVkDQogICAgICAgICAgICBjb3V0
IDw8IHNldHcoMjApIDw8IGxlZnQgPDwgbGluZSA8PCAifCI7DQogICAgICAgIH0NCiAgICAgICAg
ZWxzZSBpZiAoY291bnQgPT0gMikgew0KICAgICAgICAgICAgY291dCA8PCBzZXR3KDIzKSA8PCBy
aWdodCA8PCBsaW5lIDw8IGVuZGw7DQogICAgICAgICAgICAvLyBwcmludCBsaW5lDQogICAgICAg
ICAgICBjb3V0IDw8IHNldGZpbGwoJy0nKSA8PCBzZXR3KDQ0KSA8PCAiIiA8PCBlbmRsOw0KICAg
ICAgICAgICAgLy8gcmVzZXQgZmlsbCB0byBzcGFjZQ0KICAgICAgICAgICAgY291dCA8PCBzZXRm
aWxsKCcgJyk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBjb3V0IDw8
IHNldHcoMjApIDw8IGxlZnQgPDwgZ2V0X25hbWUobGluZSkgPDwgInwiOw0KICAgICAgICAgICAg
Y291dCA8PCBzZXR3KDIzKSA8PCByaWdodCA8PCBnZXRfbnVtYmVyKGxpbmUpIDw8IGVuZGw7DQog
ICAgICAgIH0NCiAgICAgICAgKytjb3VudDsNCiAgICB9DQogICAgaW5GUy5jbG9zZSgpOw0KfQ0K
DQovKiBSZWFkIGZyb20gdXNlcidzIGlucHV0IGFuZCB3cml0ZSBvdXQgdG8gZmlsZQ0KICAgUmV0
dXJucyBudW1iZXIgb2YgZGF0YSBwb2ludHMgaXQgcmVjZWl2ZWQuDQogICBJZiBlcnJvciwgcmV0
dXJucyAtMQ0KICAgKi8NCmludCBDb2xsZWN0SW5wdXREYXRhKGNvbnN0IHN0cmluZyYgZmlsZW5h
bWUpIHsNCiAgICBzdHJpbmcgbGluZTsNCiAgICBzaXplX3QgY291bnQgPSAwOw0KICAgIG9mc3Ry
ZWFtIG91dEZTKGZpbGVuYW1lKTsNCg0KICAgIGlmIChvdXRGUy5iYWQoKSkgew0KICAgICAgICBj
b3V0IDw8ICJDYW5ub3Qgb3BlbiAiIDw8IGZpbGVuYW1lIDw8ICIgZm9yIG91dHB1dFxuIjsNCiAg
ICAgICAgcmV0dXJuIC0xOw0KICAgIH0NCg0KICAgIGNvdXQgPDwgIkVudGVyIGEgdGl0bGUgZm9y
IHRoZSBkYXRhOlxuIjsNCiAgICBnZXRsaW5lKGNpbiwgbGluZSk7DQoNCiAgICBjb3V0IDw8ICJZ
b3UgZW50ZXJlZDogIiA8PCBsaW5lIDw8IGVuZGw7ICAgIC8vIG91dHB1dCB0byBjb25zb2xlDQog
ICAgb3V0RlMgPDwgbGluZSA8PCBlbmRsOyAgICAgICAgICAgICAgICAgICAgICAvLyBvdXRwdXQg
dG8gZmlsZQ0KDQogICAgZm9yIChpbnQgaT0xOyBpIDw9IDI7ICsraSkgew0KICAgICAgICBjb3V0
IDw8ICJFbnRlciB0aGUgY29sdW1uICIgPDwgaSA8PCAiIGhlYWRlcjpcbiI7DQogICAgICAgIGdl
dGxpbmUoY2luLCBsaW5lKTsNCiAgICAgICAgY291dCA8PCAiWW91IGVudGVyZWQ6ICIgPDwgbGlu
ZSA8PCBlbmRsIDw8IGVuZGw7DQogICAgICAgIG91dEZTIDw8IGxpbmUgPDwgZW5kbDsgICAgICAg
ICAgICAgICAgICAvLyBvdXRwdXQgdG8gZmlsZQ0KICAgIH0NCg0KICAgIHdoaWxlIChsaW5lICE9
ICItMSIpIHsNCiAgICAgICAgY291dCA8PCAiRW50ZXIgYSBkYXRhIHBvaW50ICgtMSB0byBzdG9w
IGlucHV0KTpcbiI7DQogICAgICAgIGdldGxpbmUoY2luLCBsaW5lKTsNCg0KICAgICAgICAvLyBk
b24ndCB3cml0ZSAtMSB0byB0aGUgZmlsZSBub3Igb3V0cHV0IGl0DQogICAgICAgIGlmIChsaW5l
ID09ICItMSIpIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQoNCiAgICAgICAg
Y291dCA8PCBsaW5lIDw8IGVuZGw7DQoNCiAgICAgICAgc3RyaW5nIG5hbWUgPSBnZXRfbmFtZShs
aW5lKTsNCiAgICAgICAgaW50IG51bWJlciA9IGdldF9udW1iZXIobGluZSk7DQoNCiAgICAgICAg
Y291dCA8PCAiRGF0YSBzdHJpbmc6ICIgPDwgbmFtZSA8PCBlbmRsOw0KICAgICAgICBjb3V0IDw8
ICJEYXRhIGludGVnZXI6ICIgPDwgbnVtYmVyIDw8IGVuZGw7DQoNCiAgICAgICAgLy8gd3JpdGUg
b3V0cHV0IGZpbGUgcmVmb3JtYXQgaXQgc28gaXQgaXMgY2xlYW5lZA0KICAgICAgICBvdXRGUyA8
PCBuYW1lIDw8ICIsICIgPDwgbnVtYmVyIDw8IGVuZGw7DQoNCiAgICAgICAgKytjb3VudDsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhvdyBtYW55IGRpZCB3ZSByZWFkPw0KICAg
IH0NCiAgICAvLyBjbG9zZSB0aGUgZmlsZQ0KICAgIG91dEZTLmNsb3NlKCk7DQoNCiAgICAvLyBy
ZXR1cm4gbnVtYmVyIG9mIGRhdGEgbGluZXMgKHBvc2l0aXZlIGludGVnZXIpDQogICAgcmV0dXJu
IGNvdW50Ow0KfQ0KDQovKiBVc2luZyBpZnN0cmVhbSB0byBjaGVjayBpZiB0aGUgZmlsZSBleGlz
dC4NCiAgIFBhc3MgYnkgcmVmZXJlbmNlIChzdHJpbmcmKSBiZWNhdXNlIGl0J3MgbW9yZSBlZmZp
Y2llbnQuDQogICBZb3UgY2FuIHBhc3MgaXQgYnkgdmFsdWUgYnV0IGl0IHdpbGwgdXNlIG1vcmUg
bWVtb3J5Lg0KICAgKi8NCmJvb2wgZmlsZV9leGlzdHMoY29uc3Qgc3RyaW5nJiBuYW1lKSB7DQog
ICAgaWZzdHJlYW0gZihuYW1lKTsgICAgICAgLy8gY3JlYXRlIHN0cmVhbSBhbmQgb3BlbiBmaWxl
DQogICAgcmV0dXJuIGYuZ29vZCgpOyAgICAgICAgLy8gY2hlY2sgaWYgaXQgY2FuIGJlIG9wZW5l
ZA0KfQ0KDQpzdHJpbmcgZ2V0X25hbWUoY29uc3Qgc3RyaW5nJiBsaW5lKSB7DQogICAgc2l6ZV90
IHBvcyA9IGxpbmUuZmluZCgnLCcpOw0KICAgIGlmIChwb3MgPT0gc3RyaW5nOjpucG9zKSB7DQog
ICAgICAgIHJldHVybiAiIjsNCiAgICB9DQogICAgcG9zID0gbGluZS5zdWJzdHIoMCwgcG9zKS5m
aW5kX2xhc3Rfbm90X29mKCcgJyk7DQogICAgcmV0dXJuIGxpbmUuc3Vic3RyKDAsIHBvcysxKTsg
ICAgICAgICAgIC8vIHJlbWVtYmVyIGxlbmd0aCBub3QgaW5kZXgNCn0NCg0KaW50IGdldF9udW1i
ZXIoY29uc3Qgc3RyaW5nJiBsaW5lKSB7DQogICAgc2l6ZV90IHBvcyA9IGxpbmUuZmluZCgnLCcp
Ow0KICAgIGlmIChwb3MgPT0gc3RyaW5nOjpucG9zKSB7DQogICAgICAgIHJldHVybiAtMTsNCiAg
ICB9DQogICAgc3RyaW5nIG51bWJlciA9IGxpbmUuc3Vic3RyKHBvcysxKTsgICAgIC8vIHNraXAg
dGhlIGNvbW1hDQogICAgcG9zID0gbnVtYmVyLmZpbmRfZmlyc3Rfbm90X29mKCcgJyk7ICAgIC8v
IHNraXAgYW55IHNwYWNlcw0KICAgIHJldHVybiBzdG9pKG51bWJlci5zdWJzdHIocG9zKSk7ICAg
ICAgICAvLyB0dXJuIGl0IGludG8gYSBudW1iZXINCn0=