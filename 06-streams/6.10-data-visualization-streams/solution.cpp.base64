I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8c3RyaW5nPgojaW5jbHVkZSA8dmVjdG9yPgoj
aW5jbHVkZSA8ZnN0cmVhbT4KI2luY2x1ZGUgPGlvbWFuaXA+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7
CgppbnQgV3JpdGVEYXRhKHZvaWQpIHsKICBzdHJpbmcgZGF0YUlucHV0ID0gIiI7CgogIGNvdXQg
PDwgIkVudGVyIGEgZGF0YSBwb2ludCAoLTEgdG8gc3RvcCBpbnB1dCk6XG4iOwogIGdldGxpbmUo
Y2luLCBkYXRhSW5wdXQpOwoKICBpZiAoZGF0YUlucHV0ID09ICItMSIpIHsKICAgIHJldHVybiAx
OwogIH0KCiAgb2ZzdHJlYW0gb3V0RlM7CiAgb3V0RlMub3Blbigibm92ZWxzLnR4dCIpOwogIGlm
ICghb3V0RlMuaXNfb3BlbigpKSB7CiAgICBjb3V0IDw8ICJDYW5ub3Qgb3BlbiBub3ZlbHMudHh0
XG4iOwogICAgcmV0dXJuIDE7CiAgfQoKICB3aGlsZSAoZGF0YUlucHV0ICE9ICItMSIpIHsKICAg
IGludCBjb21tYVBvcyA9IGRhdGFJbnB1dC5maW5kKCIsIik7CiAgICBzdHJpbmcgbmFtZSA9IGRh
dGFJbnB1dC5zdWJzdHIoMCwgY29tbWFQb3MpOwogICAgaW50IG51bSA9IHN0b2koZGF0YUlucHV0
LnN1YnN0cihjb21tYVBvcysxLCBkYXRhSW5wdXQuc2l6ZSgpKSk7CgogICAgY291dCA8PCAiRGF0
YSBzdHJpbmc6ICIgPDwgbmFtZSA8PCBlbmRsOwogICAgY291dCA8PCAiRGF0YSBpbnRlZ2VyOiAi
IDw8IG51bSA8PCBlbmRsOwogICAgb3V0RlMgPDwgbmFtZSA8PCBlbmRsOwogICAgb3V0RlMgPDwg
bnVtIDw8IGVuZGw7CgogICAgY291dCA8PCAiRW50ZXIgYSBkYXRhIHBvaW50ICgtMSB0byBzdG9w
IGlucHV0KTpcbiI7CiAgICBnZXRsaW5lKGNpbiwgZGF0YUlucHV0KTsKICB9CgogIG91dEZTLmNs
b3NlKCk7CiAgcmV0dXJuIDA7Cn0KCmludCBPdXRwdXRUYWJsZShjb25zdCBzdHJpbmcgdGl0bGUs
CiAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmcgaGVhZGVyMSwKICAgICAgICAgICAgICAgIGNv
bnN0IHN0cmluZyBoZWFkZXIyKSB7CiAgaWZzdHJlYW0gaW5GUzsKICBzdHJpbmcgbmFtZSwgbnVt
OwoKICBjb3V0IDw8IHNldHcoMzMpIDw8IHJpZ2h0IDw8IHRpdGxlIDw8IGVuZGw7CiAgY291dCA8
PCBzZXR3KDIwKSA8PCBsZWZ0IDw8IGhlYWRlcjEgPDwgInwiOwogIGNvdXQgPDwgc2V0dygyMykg
PDwgcmlnaHQgPDwgaGVhZGVyMiA8PCBlbmRsOwoKICBjb3V0IDw8IHNldGZpbGwoJy0nKSA8PCBz
ZXR3KDQ0KSA8PCAiIiA8PCBlbmRsOwogIGNvdXQgPDwgc2V0ZmlsbCgnICcpOwoKICBpbkZTLm9w
ZW4oIm5vdmVscy50eHQiKTsKICBpZiAoIWluRlMuaXNfb3BlbigpKSB7CiAgICBjb3V0IDw8ICJD
YW5ub3Qgb3BlbiBub3ZlbHMudHh0XG4iOwogICAgcmV0dXJuIDE7CiAgfQoKICB3aGlsZSAoIWlu
RlMuZW9mKCkpIHsKICAgIGdldGxpbmUoaW5GUywgbmFtZSk7CiAgICBnZXRsaW5lKGluRlMsIG51
bSk7CiAgICBpZiAoIWluRlMuZmFpbCgpKSB7CiAgICAgIGNvdXQgPDwgc2V0dygyMCkgPDwgbGVm
dCA8PCBuYW1lIDw8ICJ8IjsKICAgICAgY291dCA8PCBzZXR3KDIzKSA8PCByaWdodCA8PCBudW0g
PDwgZW5kbDsKICAgIH0KICB9CgogIGluRlMuY2xvc2UoKTsKICByZXR1cm4gMDsKfQoKaW50IE91
dHB1dENoYXJ0KHZvaWQpIHsKICBpZnN0cmVhbSBpbkZTOwogIHN0cmluZyBuYW1lLCBudW07Cgog
IGluRlMub3Blbigibm92ZWxzLnR4dCIpOwogIGlmICghaW5GUy5pc19vcGVuKCkpIHsKICAgIGNv
dXQgPDwgIkNhbm5vdCBvcGVuIG5vdmVscy50eHRcbiI7CiAgICByZXR1cm4gMTsKICB9CgogIHdo
aWxlKCFpbkZTLmVvZigpKSB7CiAgICBnZXRsaW5lKGluRlMsIG5hbWUpOwogICAgZ2V0bGluZShp
bkZTLCBudW0pOwogICAgaWYgKCFpbkZTLmZhaWwoKSkgewogICAgICBjb3V0IDw8IHNldGZpbGwo
JyAnKSA8PCBzZXR3KDIwKSA8PCByaWdodCA8PCBuYW1lIDw8ICIgIjsKICAgICAgY291dCA8PCBz
ZXRmaWxsKCcqJykgPDwgc2V0dyhzdG9pKG51bSkpIDw8ICIiIDw8IGVuZGw7CiAgICB9CiAgfQoK
ICBpbkZTLmNsb3NlKCk7CiAgcmV0dXJuIDA7Cn0KCmludCBtYWluKCkgewogIHN0cmluZyB0aXRs
ZSwgYzFIZWFkZXIsIGMySGVhZGVyOwoKICBjb3V0IDw8ICJFbnRlciBhIHRpdGxlIGZvciB0aGUg
ZGF0YTpcbiI7CiAgZ2V0bGluZShjaW4sIHRpdGxlKTsKICBjb3V0IDw8ICJZb3UgZW50ZXJlZDog
IiA8PCB0aXRsZSA8PCBlbmRsIDw8IGVuZGw7OwoKICBjb3V0IDw8ICJFbnRlciB0aGUgY29sdW1u
IDEgaGVhZGVyOlxuIjsKICBnZXRsaW5lKGNpbiwgYzFIZWFkZXIpOwogIGNvdXQgPDwgIllvdSBl
bnRlcmVkOiAiIDw8IGMxSGVhZGVyIDw8IGVuZGwgPDwgZW5kbDsKICAKICBjb3V0IDw8ICJFbnRl
ciB0aGUgY29sdW1uIDIgaGVhZGVyOlxuIjsKICBnZXRsaW5lKGNpbiwgYzJIZWFkZXIpOwogIGNv
dXQgPDwgIllvdSBlbnRlcmVkOiAiIDw8IGMySGVhZGVyIDw8IGVuZGwgPDwgZW5kbDsKCiAgaWYg
KFdyaXRlRGF0YSgpICE9IDApIHsKICAgIHJldHVybiAxOwogIH0KCiAgaWYgKE91dHB1dFRhYmxl
KHRpdGxlLCBjMUhlYWRlciwgYzJIZWFkZXIpICE9IDApIHsKICAgIHJldHVybiAxOwogIH0KCiAg
Y291dCA8PCBlbmRsOwoKICBpZiAoT3V0cHV0Q2hhcnQoKSAhPSAwKSB7CiAgICByZXR1cm4gMTsK
ICB9CgogIHJldHVybiAwOwp9