I2luY2x1ZGUgPGlvc3RyZWFtPg0KI2luY2x1ZGUgPHN0cmluZz4NCiNpbmNsdWRlIDxmc3RyZWFt
Pg0KI2luY2x1ZGUgPGlvbWFuaXA+DQojaW5jbHVkZSA8bWFwPg0KDQp1c2luZyBuYW1lc3BhY2Ug
c3RkOw0KDQpjb25zdCBtYXA8c3RyaW5nLCBkb3VibGU+IEFDVElWSVRJRVN7DQogICAgeyJzaXQi
LCAxLjR9LA0KICAgIHsid2FsayIsIDUuNH0sDQogICAgeyJydW4iLCAxMy4wfSwNCiAgICB7ImJp
a2UiLCA2Ljh9LA0KICAgIHsic3dpbSIsIDguN319Ow0KDQpkb3VibGUgQWN0aXZpdHlDYWxvcmll
cyhzdHJpbmcgYWN0aXZpdHksIGludCBtaW4pOw0Kdm9pZCBDYWxjdWxhdGVDYWxvcmllc1VzZXJJ
bnB1dCgpOw0Kdm9pZCBDYWxjdWxhdGVDYWxvcmllc0Zyb21GaWxlKGNvbnN0IHN0cmluZyAmZmls
ZW5hbWUpOw0KDQppbnQgbWFpbigpDQp7DQogICAgY29uc3Qgc3RyaW5nIEZJTEVOQU1FID0gImlu
cHV0LnR4dCI7DQogICAgQ2FsY3VsYXRlQ2Fsb3JpZXNGcm9tRmlsZShGSUxFTkFNRSk7DQoNCiAg
ICAvLyBDYWxjdWxhdGVDYWxvcmllc1VzZXJJbnB1dCgpOw0KDQogICAgcmV0dXJuIDA7DQp9DQoN
Ci8vIFBhcnQgMSAtLSBVc2VyIGlucHV0DQp2b2lkIENhbGN1bGF0ZUNhbG9yaWVzVXNlcklucHV0
KCkNCnsNCiAgICBpbnQgdXNlck1pbnV0ZXM7DQogICAgc3RyaW5nIHVzZXJBY3Rpdml0eTsNCg0K
ICAgIC8vIFBhcnQgMSAtLSB1c2VyIGlucHV0DQogICAgY2luID4+IHVzZXJBY3Rpdml0eTsNCiAg
ICBjaW4gPj4gdXNlck1pbnV0ZXM7DQoNCiAgICBjb3V0IDw8IEFjdGl2aXR5Q2Fsb3JpZXModXNl
ckFjdGl2aXR5LCB1c2VyTWludXRlcykgPDwgZW5kbDsNCn0NCg0Kdm9pZCBDYWxjdWxhdGVDYWxv
cmllc0Zyb21GaWxlKGNvbnN0IHN0cmluZyAmZmlsZW5hbWUpDQp7DQogICAgaWZzdHJlYW0gaW5G
UyhmaWxlbmFtZSk7DQogICAgaW50IHVzZXJNaW51dGVzOw0KICAgIHN0cmluZyB1c2VyQWN0aXZp
dHk7DQoNCiAgICBpZiAoIWluRlMuaXNfb3BlbigpKQ0KICAgIHsNCiAgICAgICAgY291dCA8PCAi
Q2Fubm90IG9wZW4gIiA8PCBmaWxlbmFtZSA8PCBlbmRsOw0KICAgICAgICByZXR1cm47DQogICAg
fQ0KDQogICAgY291dCA8PCBmaXhlZCA8PCBzZXRwcmVjaXNpb24oMSk7DQogICAgd2hpbGUgKCFp
bkZTLmVvZigpKQ0KICAgIHsNCiAgICAgICAgaW5GUyA+PiB1c2VyQWN0aXZpdHkgPj4gdXNlck1p
bnV0ZXM7DQogICAgICAgIGlmIChpbkZTLmZhaWwoKSkNCiAgICAgICAgew0KICAgICAgICAgICAg
Y29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgZG91YmxlIGNhbG9yaWVzID0gQWN0aXZpdHlD
YWxvcmllcyh1c2VyQWN0aXZpdHksIHVzZXJNaW51dGVzKTsNCiAgICAgICAgY291dCA8PCB1c2Vy
QWN0aXZpdHkgPDwgIiBmb3IgIg0KICAgICAgICAgICAgIDw8IHVzZXJNaW51dGVzIDw8ICIgbWlu
dXRlcyBidXJucyAiDQogICAgICAgICAgICAgPDwgY2Fsb3JpZXMgPDwgIiBjYWxvcmllc1xuIjsN
CiAgICB9DQogICAgaW5GUy5jbG9zZSgpOw0KfQ0KDQpkb3VibGUgQWN0aXZpdHlDYWxvcmllcyhz
dHJpbmcgYWN0aXZpdHksIGludCBtaW4pDQp7DQogICAgLy8gdHJ5IHRvIGZpbmQgdGhlIGFjdGl2
aXR5IGluIHRoZSBtYXAgYWJvdmUNCiAgICBhdXRvIHNlYXJjaCA9IEFDVElWSVRJRVMuZmluZChh
Y3Rpdml0eSk7DQoNCiAgICAvLyBjaGVjayBpZiBpdCBjb3VsZG4ndCBmaW5kIHNvbWV0aGluZw0K
ICAgIGlmIChzZWFyY2ggPT0gQUNUSVZJVElFUy5lbmQoKSkNCiAgICB7DQogICAgICAgIHJldHVy
biAwLjA7IC8vIHJlbWVtYmVyIGRvdWJsZQ0KICAgIH0NCiAgICAvLyByZW1lbWJlciB0byBjYXN0
IHRoZSBtaW51dGUgdG8gZG91YmxlDQogICAgcmV0dXJuIEFDVElWSVRJRVMuYXQoYWN0aXZpdHkp
ICogc3RhdGljX2Nhc3Q8ZG91YmxlPihtaW4pOw0KfQ0K